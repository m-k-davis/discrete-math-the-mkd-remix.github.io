= Counting: Permutations and Combinations

#*CAUTION* - CHAPTER UNDER CONSTRUCTION!#

include::LinkToPublic.adoc[] 


_This chapter was last updated on March 17, 2025._ + 
[small]#Contents locked until 11:59 p.m. Pacific Standard Time on May 23, 2025.#

////
AUG 2024 update on topics (basic counting)
Counting arguments: Set cardinality and counting
Counting arguments
Counting arguments: Sum and product rule
Counting arguments: Inclusion-exclusion principle
The pigeonhole principle

AUG 2024 update on topics (permutations, combinations, Pascal)
Permutations and combinations
Permutations and combinations: Basic definitions
Permutations and combinations: Pascal’s identity
Permutations and combinations: The binomial theorem
binomials

AUG 2024 update on topics (arithmetic and geometric progressions)
MKD: Arithmetic and geometric progressions appears to be CCSSM Algebra One, so this may be appropriate for the Intro and Just-In-Time chapters
Counting arguments: Arithmetic and geometric progressions

AUG 2024 update on topics (recurrence relations) 
MKD: Do after Pascal's Triangle - MOVED to Sequences and Recursion chapter
Solving recurrence relations: An example of a simple recurrence relation, such as Fibonacci numbers
Counting arguments: Fibonacci numbers
Solving recurrence relations: Other examples, showing a variety of solutions
Solving recurrence relations: Common examples
Solving recurrence relations: The Master theorem

AUG 2024 update on topics (modular arithmetic) 
MKD: MOVED TO Relations -use treatment similar to Haggard Schlipf Whitesides 
Basic modular arithmetic

COUNTING II - January 2025
DS2013/Basics of Counting	Permutations and combinations: Basic definitions
DS2013/Basics of Counting	Permutations and combinations: Pascal’s identity
DS2013/Basics of Counting	Permutations and combinations: The binomial theorem
DS2008/BasicsOfCounting	Permutations and combinations
DS2008/BasicsOfCounting	Basic definitions
DS2008/BasicsOfCounting	Pascal’s identity
DS2008/BasicsOfCounting	The binomial theorem
DS2001/Basics of counting	Permutations and combinations: Basic definitions
DS2001/Basics of counting	Permutations and combinations: Pascal’s identity
DS2001/Basics of counting	Permutations and combinations: The binomial theorem
ACM_CCECC_2005/Combinatorics	binomials
ACM_CCECC_2005/Combinatorics	counting arguments
ACM_CCECC_2005/Combinatorics	discrete probability
ACM_CCECC_2005/Combinatorics	combinations and permutations
ACM_CCECC_2005/Combinatorics	pigeon-hole principle


// MKD notes 
//	1. Arithmetic and geometric progressions are covered in Algebra Ⅰ in the Common Core, so Remix can simply "review" this material - put it in the Just-In-Time appendix 
//	2. Solving recurrence relations (and Fibonacci in general) will be moved to Sequences and Recursion. Also Master Theorem???
//	3. Modular Arithmetic will be moved to Relations

// MKD reference to Master Theorem https://en.wikipedia.org/wiki/Master_theorem_(analysis_of_algorithms), 'The name "master theorem" was popularized by the widely-used algorithms textbook Introduction to Algorithms by Cormen, Leiserson, Rivest, and Stein.')
			see https://web.archive.org/web/20170922231154/http://www.dtic.mil/get-tr-doc/pdf?AD=ADA064294
////

// MKD start topics list
////
"The sum rule"
"The product rule"
PIE
Using a tree diagram to count possibilities
Pigeonhole Principle
Choosing when order matters (permutations - repeatedly use product rule)
Choosing when order does not matter (combinations)
Understand P(n, r) = C(n, r)⋅P(r, r) without computing
Understand C(n,r)=C(n,n–r) without computing
Applications (e.g., "ball-box" type problems)
Activity: Binomial
	Discover Pascal’s Identity: C(n+1,k)=C(n,k–1)+C(n,k).
	Binomial coefficients
	Connect to Pascal's triangle, so-called, but known earlier by other non-non-French mathematicians: 
		Al-Karaji, Persian (953–1029) (but called Khayyam's triangle)
		Jia Xian (1010–1070), China (but called Yang Hui's triangle)
		INCLUDE IMAGE: https://commons.wikimedia.org/wiki/File:TrianguloPascal.jpg via https://cudl.lib.cam.ac.uk/view/PR-CCB-00013-00024/5, but need to verify that this is USA Public Domain. NOTE that the rectangular array makes it easy to set up a spreadsheet for the triangle.
		IMAGE also found at "https://cudl.lib.cam.ac.uk/embed/#item=PR-CCB-00013-00024&page=5&hide-info=true"
Exercises (proofs by induction)
	If r \geq 0 and r \leq n, then P(n,r) = n!/(n-r)! (Induct on r, treat n as constant)
	If r \geq 0 and r \leq n, then C(n,r) = n!/(n-r)!r! (Induct on r, treat n as constant OR apply previous exercise and reason that P(n, r) = C(n, r)⋅P(r, r))
////
// MKD end topics list



//MKD content starts here

//In this chapter you will learn about counting techniques that are more advanced that the ones you studied in the link:./counting_arithmetic.html[Counting: Arithmetic Techniques ] chapter.

// MKD can use https://www.britannica.com/science/Pascals-triangle

//== Permutations and Combinations


//MKD added subsection header and text

Many problems can be solved by counting the number of possible outcomes when choosing $r$ elements from a set that contains $n$ elements, with no repetition allowed (that is, each element can only be counted once). To be clear, this assumes that $r$ and $n$ are natural numbers and $r \leq n.$ + 
//[small]#We are assuming that $r$ and $n$ are natural numbers and $r \leq n.$#

//MKD maybe give an example of repetition and nonrepetition here?

Some of these problems involve choosing an _ordered sequence_ of $r$ elements while other problems involve choosing a _subset_ of $r$ elements. 

This chapter presents techniques for doing this type of counting. These techniques are built on the ones you studied in the link:./counting_arithmetic.html[Counting: Arithmetic Techniques] chapter.



Key terms and concepts covered in this chapter:

* Permutations and combinations
** Basic definitions
** Pascal’s identity
** The binomial theorem
* binomials
// ACM_CCECC_2005/Combinatorics	binomials
// ACM_CCECC_2005/Combinatorics	counting arguments
// ACM_CCECC_2005/Combinatorics	combinations and permutations
// ACM_CCECC_2005/Combinatorics	pigeon-hole principle


// MKD new section Sept 8 2024
== The Factorial Of A Number

The factorial is a function defined for all natural numbers as described below. 

****
.Definition - The Factorial 
Given a natural number $n,$ the function $n!$ is defined recursively as \[0! = 1\] \[ n! = n \cdot (n-1)! \]

That is, \[n! = n(n-1)(n-2) \cdots (2)(1)(1).\] This function is called the *factorial of $n$* and also *"$n-$factorial."*
****


//=== Permutations
== Permutations

A *permutation* of a set of elements is an ordered arrangement of the elements without repetition of elements. A permutation may involve every element of the set, or only some of the elements of the set. That is, a permutation is a sequence of elements from the set, where no element can appear more than once in the sequence. + 
//[small]#If you studied outside the USA, you may have seen _phermutation_ used only in the case where every element of the set is involved, and _variation_ used if only some of the elements are involved. In this textbook, all of these will be called *permutations.*#
[small]#Note: If you studied outside the USA, you may have learned that a permutation must involve _every element_ of the set, and that the term *variation* is used when the arrangment involves only some (but not all) of the elements of the set. In this textbook, all of these are called *permutations.*#

//MKD Aug 20 2024
// rewrote to avoid capital C since this clashed with C(n,r) later
Consider the last four uppercase English letters $W, X, Y, Z$.

* $WXYZ, XWYZ, WXZY$ are permutations of the letters taken four at a time
* $XZW, WXY, WXZ$ are permutations of the letters taken three at a time
* $WX, WY, ZX$ are permutations of the letters taken two at a time

[small]#Note: To be more formal, the sequences above could be written as _tuples_ of the form $(W, X, Y, Z),$ $(X, W, Y, Z),$ $(W, X, Z, Y),$ and so on, but the notation used is simpler without the extra symbolic clutter of parentheses and commas.#

Notice that no letter is repeated in a permutation.

// MKD added the following paragraph
How can you count all the possible permutations of a set? For small sets like the set of the last four uppercase English letters, you could list all the possible permutations of $W, X, Y, Z$ to determine that there are 24 permutations of the letters taken four at a time, 
24 permutations of the letters taken three at a time, 
and 6 permutations of the letters taken three at a time. 
But what if you wanted to find all the possible permutations of all twenty six uppercase English letters $A, B, \ldots , W, X, Y, Z$? It would be very time consuming to write out all possible permutations of, say, the twenty six uppercase English letters taken twenty one at a time, let alone all the other possible permutations. We will develop a technique for doing this kind of counting now. 

//MKD considered changing $r$-permutation to _r-_permutation but it does not look as good

//====
****
.Definition 
Given a set of $n$ elements, an _ordered arrangment_ of $r \le n$ of 
the elements is called an *$r$-permutation* or a *permutation of $n$ elements taken $r$ at a time.* 

The notation $P(n,r)$ represents the number of permutations of $n$ elements taken $r$ at a time. Note that $_nP_r$ is another commonly-used notation for this count.
****
//====

//MKD added the following two paragraphs
Suppose you have a set that contains $n$ elements and want to construct a $2$-permutation of the elements. There are $n$ possible choices for the first element, and once that element is chosen, there are $n-1$ possible choices for the second element. The product rule lets you conclude that there are $n(n-1)$ ways to choose the two elements, taking into account that the order of the choices matters.

Now we can generalize this argument, informally: Suppose you have a set that contains $n$ elements and want to construct an $r$-permutation, where $r \le n.$ There are $n$ possible choices for the first element, $n-1$ possible choices for the second element, and so on, until we have $n-(r-1)$ possible choices for the $r\text{th}$ element. Apply the product rule repeatedly to conclude that there are $ n(n-1)\cdots (n-r+1)$ $r$-permutations of the $n$ elements. 

The process in the previous paragraph can also be viewed recursively. Suppose you have a set that contains $n$ elements and want to construct an $r$-permutation, where $r \le n.$ There are $n$ possible choices for the first element, and the product rule let's us conclude that the number of $r$-permutations of the $n$ elements, $P(n,r),$ is the product of $n$ and $P(n-1,r-1).$ 
Noticing that $P(n-r,0) = 1$ lets us draw the same conclusion as in the previous paragraph: 
There are $P(n,r) =  n \cdot \left((n-1)\cdots (n-r+1) \right)$ permutations of $n$ elements taken $r$ at a time. 

.Theorem
****
For natural numbers $r$ and $n$ with $r \leq n,$ \[P(n,r) = n(n-1)(n-2) \cdots (n-r+1).\] 
//[small]#Note: A more formal proof that uses the  link:./induction.html[mathematical induction] proof technique will be given later in this textbook.#
****
// = \displaystyle \frac{n!}{(n-r)!}$.
//[small]#For now, this is only a conjecture as we have not validated it for all possible natural numbers $r$ and $n$ with $r \leq n.$ A formal proof can be done using the link:./induction.html[mathematical induction] proof technique.#
// MKD - added text - maybe add an exercise for the induction, too?
//Note that a formal proof can be done by using mathematical induction.
// on $r$, treating $n$ as a constant.


:pt_code_height: 500
:pt_rawinput: false
:pt_code: %23Listing%20Permutations%20of%203%20elements%0A%0ANumbers%20%3D%20%5B1,%202,%203,%204,%205%5D%0A%0ACounter%20%3D%200%0A%0Afor%20i%20in%20Numbers%3A%0A%20%20%20%20for%20j%20in%20Numbers%3A%0A%20%20%20%20%20%20%20%20if%20j%20!%3D%20i%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%20in%20Numbers%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20k%20!%3D%20i%20and%20k%20!%3D%20j%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print%20%28i,%20j,%20k%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Counter%20%3D%20Counter%20%2B%201%0Aprint%28Counter%29
****
.Example {counter:countexample} - Permutations of 5 elements taken 3 at a time
--
--
//Try to predict what happens with the code and verify.
How many lines of output will be printed by the following code? 

You could trace through the code using the _Next_ button to answer the question, but it would be tedious... try using the formula for $r$-permutations instead... and remember to count the final print statement after the loop, too.

include::python_tutor.adoc[]

****
//.You try
//Try using link:http://pythontutor.com/live.html#mode=edit[Pythontutor] to list permutations of 5 elements taken 4 at a time.


*Video Example*

The following video example features 
Dr. Joshua Roberts, Associate Professor of Mathematics at Georgia Gwinnett College.

video::tTvaodWc6ic[youtube, 700, 500]


:pt_code_height: 500
:pt_rawinput: false
:pt_code: %23Counting%20Permutations%0A%0Adef%20ProdCount%28n,r%29%3A%0A%20%20%20%20product%20%3D%20n%0A%20%20%20%20k%20%3D%20n-r%0A%20%20%20%20for%20i%20in%20range%28n-r%2B1,%20n%29%3A%0A%20%20%20%20%20%20%20%20product%20%3D%20product*i%0A%20%20%20%20return%20product%0A%20%20%20%20%0Aprint%28ProdCount%285,2%29%29
****
.Example {counter:countexample} - Counting Permutations
--
--
The code below calculates the number of permutations given $n$ and $r$.  Try to predict the variable names, values, and data types at different steps in the execution. Use the _Next_ button to check your answers.
include::python_tutor.adoc[]

[env.Question]
--
How many permutations are there of the twenty six uppercase English letters taken twenty one at a time?
--

[click.hint]
--
Edit the code so that it will compute ProdCount(26,21), a relatively "small" natural number... "small" meaning that it's decimal expansion has only 25 digts! 😎 
--
//3 360 762 176 055 046 963 200 000

//.You Try
//Try using link:http://pythontutor.com/live.html#mode=edit[Pythontutor] to count permutations using a factorial formula.

****

// MKD - added text - maybe add an exercise for the induction, too?
//The previous code example gives evidence for the following theorem. 
//Again, a formal proof can be done by using mathematical induction. 

Here is another way to think about counting the number of permutations of $n$ elements taken $r$ at a time: Imagine writing down all possible permutations of $n$ elements taken $n$ at a time, that is all possible ordered arrangements of all $n$ elements. Notice that if we only care about the first $r$ elements in the list, then there are $n-r$ elements at the end of the list that we can rearrange in any of $(n-r)!$ ways without changing the order of the the first $r$ elements. Now apply the division rule from the link:./counting_arithmetic.html[Counting: Arithmetic Techniques] chapter:  
We have a procedure, ordering all $n$ elements, that can be completed in $n!$ possible ways, but for each way of completing this procedure there are $(n-r)!$ possible ways with the same outcome for ordering the first $r$ elements. The division rule lets you conclude that there are $\frac{n!}{(n-r)!}$ ways to order the first $r$ elements.

.Theorem
****
For natural numbers $r$ and $n$ with $r \leq n,$ \[P(n,r) = \displaystyle \frac{n!}{(n-r)!}\] 
//[small]#A more formal proof that uses  link:./induction.html[mathematical induction] will be given later in the textbook, too.#
****


*Video Example*

// MKD this uses n!/(n-r)!

The following video example features 
Dr. Joshua Roberts, Associate Professor of Mathematics at Georgia Gwinnett College.


++++
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2022371/sp/202237100/embedIframeJs/uiconf_id/31860982/partner_id/2022371?iframeembed=true&playerId=kaltura_player&entry_id=0_julbjvm6&flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_s0uli5zb" width="700" height="500" allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
++++

// video::f14jQTpb2EM[youtube, 700, 500]


****
.Example {counter:countexample}

If there are 10 runners in a race, how many different ways can the gold, silver, and bronze medals be awarded?

.Solution
There are 10 elements (the runners) and we are choosing 3 to win medals. So the number of ways they can be awarded is


$P(10,3) = \displaystyle \frac{10!}{(10-3)!} = \frac{10!}{7!} = 10 \times 9 \times 8 = 720$

Alternatively, we could have used the product rule and noticed that there are 10 ways to award the gold, then there are 9 ways to award the silver,
then 8 ways to award the brozne.

.You Try
From a group of 100 workers in a union, how many ways can there be a union President, Vice President, and Treasurer?
****


****
.Example {counter:countexample}
How many permutations of the digits 0123456789 are there that contain the string 456?

.Solution
We can regard this as a permutation of 8 elements: the string "456" and the other 7 individual digits. These 8 elements can occur in any order, so the number of permutations is

$P(8,8) = 8! = 40320.$

[env.challenge]
--
How many different six-letter words (including nonsense words), can be formed using the letters in "HEROIC" where the vowels must appear together and no letters are repeated?
--

[click.hint]
--
You can regard this a permutation of the 3 consonants and a string of 3 consecutive vowels... but notice that the order of the vowels matters.
--

****

:pt_code_height: 350
:pt_rawinput: false
:pt_code: import%20math%0An%20%3D%205%0Ar%20%3D%203%0Aprint%28math.factorial%28n%29//math.factorial%28n-r%29%29%0A%23print%28math.perm%28n,r%29%29%20%23Python%203.8%20or%20later
****
.Example {counter:countexample} - Python functions for Factorial and Counting Permutations
--
--
This code sample illustrates how to use functions in Python's `math` module to compute $n!$ and $_nP_r.$

include::python_tutor.adoc[]

****

//MKD added subsection header 

//=== Combinations
== Combinations

A selection 
of elements from a set of $n$ elements 
where order 
of selection 
does not matter is called a *combination*. 
Notice that each combination corresponds to a subset of the set of $n$ elements.
//, that is, each combination is the unordered list that describes a subset.

Consider the letters $W, X, Y, Z$ and choose three at a time where the order does not matter. 
//That is, the choice $ABC$ is the same choice as $BCA$.  
//MKD inserted sentences
In this case we are selecting a _subset_ of size three instead of a sequence of length three. The sets $\{ W, X, Y \}$ and $\{ X, Y, W \}$ are just two ways of describing the same set since the order in which elements of a set are listed does not matter.  

* There are four possible ways to choose three letters without regard to order:
$\{ W, X, Y \}$, 
$\{ W, X, Z \}$, 
$\{ W, Y, Z \}$, and 
$\{ X, Y, Z \}$.
* There are six possible ways to choose three letters without regard to order:
$\{ W, X \}$, 
$\{ W, Y \}$, 
$\{ W, Z \}$, 
$\{ X, Y \}$, 
$\{ X, Z \}$, and 
$\{ Y, Z \}$. 
* There are four possible ways to choose one letter (without regard to order):
$\{ Z \}$, 
$\{ Y \}$, 
$\{ X \}$, and 
$\{ W \}$. (Keep reading to find out why this "reversed" ordering of the subsets was used.)


This shows that there are 
4 combinations of 4 elements taken 3 at a time,  
6 combinations of 4 elements taken 2 at a time, and 
4 combinations of 4 elements taken 1 at a time.  


****
.Definition 
Given a set of $n$ elements, an _unordered selection_ of $r \le n$ of 
the elements is called an *$r$-combination* or a *combination of $n$ elements taken $r$ at a time.* 

The notation $C(n,r)$ represents the number of combinations of $n$ elements taken $r$ at a time. Note that $_nC_r$ is another commonly-used notation for this count, as is the *binomial coefficient* $n\choose r$. Any of these notations can read as "$n$ choose $r.$"
****

// MKD original - ${n}\choose{r}$ was omitted to integrate the Binomial activity
////
In general, given a set of $n$ elements, 
an 
_unordered selection_ of $r\le n$ of them is 
called 
an *$r$-combination* or a *combination of $n$ elements taken $r$ at a time*. We will denote this by $C(n,r)$, read as 
"$n$ choose $r$." 
Note that $_nC_r$ is commonly used by calculators. 
Another common notation is ${n}\choose{r}$. 
////


// MKD combination symmetry begins 
////
Using this notation, we can write $C(4,3) = 4$, $C(4,2) = 6$, and $C(4,1) = 4$.


Notice that $C(4,3) = C(4,1)$; it may appear that this "just happens to be true", but in fact is an example of the next theorem. In this case, a combination of 4 elements taken 3 at a time corresponds to a combination of 4 elements taken 1 at a time - we can choose 3 of the 4 elements by "throwing out" the 1 element we don't want to keep. That is, we choose the 3-element subset we care about indirectly by instead choosing the 1-element complement of the subset.

In general, there is always a one-to-one correspondence between 
the combinations of $n$ elements taken $r$ at a time and the combinations of $n$ elements taken $n-r$ at a time: Choosing $r$ elements for a subset corresponds to choosing the $n-r$ elements for the complement of the subset. 

// MKD - need to add this to set theory chapter after May 24, 2024:
// The one-to-one correspondence on power set that maps A to its complement.

.Theorem
****
$C(n,r) = C(n,n-r)$
****

A formal proof of the theorem can be written by proving that, for any set $S$, the function with domain and codomain $\mathcal{P}(S)$ and that maps each subset of $S$ to its complement is both injective and surjective.
////
// MKD combination symmetry ends

//MKD added the following two paragraphs
Next, notice that every $r$-combination corresponds to $P(r, r) = r!$ different $r$-permutations. That is, to select a $r$-permutation we could instead first select a $r$-combination without regard to order and then order the $r$ elements. 

As an example, suppose we have $n$ elements and want to construct a $3$-permutation. We could instead first choose a $3$-combination of the elements. There are $C(n,3)$ possible $3$-combinations. Once we have chosen a specific $3$-combination, we can reorder the 3 elements 
//in the subset of 3 elements 
in $P(3,3) = 3!$ ways. 
This argument shows that 
$P(n,3) = C(n,3) \cdot P(3,3) =  C(n,3) \cdot 3!$, so 
$C(n,3) = \displaystyle \frac{P(n,3)}{3!}$. 

We can generalize this argument for each natural number $r \leq n$ to arrive at the next theoren.

.Theorem
****
$C(n,r) = \displaystyle \frac{P(n,r)}{r!} = \frac{n!}{r!(n-r)!}$
****

// MKD - added text - maybe add an exercise for the induction, too?
//A formal proof of the theorem can be done by using mathematical induction.
// on $r$, treating $n$ as a constant.


:pt_code_height: 500
:pt_rawinput: false
:pt_code: %235%20choose%203%0A%0ANumbers%20%3D%20%5B1,%202,%203,%204,%205%5D%0ACounter%20%3D%200%0A%0Afor%20i%20in%20Numbers%3A%0A%20%20%20%20for%20j%20in%20Numbers%3A%0A%20%20%20%20%20%20%20%20if%20j%20%3E%20i%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%20in%20Numbers%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20k%20%3E%20j%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20print%20%28i,%20j,%20k%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Counter%20%3D%20Counter%20%2B%201%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0Aprint%28Counter%29
****
//.Example {counter:countexample} - Combinations of 5 elements 3 at at time
.Example {counter:countexample} - Combinations of 5 elements taken 3 at a time
--
--
The code below calculates the number of and lists combinations given $n$ and $r$.  

How many lines of output will be printed by the following code? Remember to count the final print statement after the loop, too.

include::python_tutor.adoc[]

.You try
Edit the code to list and count combinations of 5 choose 4.
****

////
.You try
Now try using link:http://pythontutor.com/live.html#mode=edit[Pythontutor] to calculate combinations using factorials.
////


*Video Example*

++++
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2022371/sp/202237100/embedIframeJs/uiconf_id/31860982/partner_id/2022371?iframeembed=true&playerId=kaltura_player&entry_id=0_q7vdemao&flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_kbgw9kgq" width="700" height="500" allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
++++

// video::Xsi2CS7S5SQ[youtube, 700, 500]



*Video Example*

++++
<iframe id="kaltura_player" src="https://cdnapisec.kaltura.com/p/2022371/sp/202237100/embedIframeJs/uiconf_id/31860982/partner_id/2022371?iframeembed=true&playerId=kaltura_player&entry_id=0_mwu49tz8&flashvars[streamerType]=auto&amp;flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;&wid=1_azbrfaq2" width="700" height="500" allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player"></iframe>
++++

****
.Example {counter:countexample}
How many ways can five cards be dealt from a standard 52-card deck?

.Solution
We are choosing 5 cards from 52 cards and the order does not matter, so $C(52,5)=\displaystyle \frac{52!}{5!47!}$
****


****
.Example {counter:countexample}
How many bit strings of length $n$ contain exactly $r$ 0s?

.Solution
Choosing the positions of the $r$ 0s corresponds to the $r$-combinations of the set $\{1, 2, 3, \dots, n\}$. Thus there are exactly
$C(n,r)$ such bit strings.
****


=== Properties Of Combinations

//#*RECOMMENDATION:* The link:https://calearninglab.org/project/expanding-equity-and-access-in-discrete-mathematics/["Binomial" activity] can replace this subsection.#

In this subsection you will learn about some properties of $C(n, r)$ and a famous "number triangle;" you will see that the values listed in the triangle coincide with the values of $C(n,r).$


// MKD Pascal begins 
//MKD added this new subsubsection 
[[arithmetic_triangle]]
==== Pascal’s Triangle

// MKD add historical note and also the link to the triangle
// also known as Pascal's formula, Pascal's rule
// https://en.wikipedia.org/wiki/Binomial_coefficient#History_and_notation
// also see https://en.wikipedia.org/wiki/Pascal%27s_rule
//https://cudl.lib.cam.ac.uk/view/PR-CCB-00013-00024/5
//https://aperiodical.com/2021/12/pascals-triangle-and-its-secrets-introduction/

//https://wikimedia.org/api/rest_v1/media/math/render/svg/3a8beb14cd64d7451f9f9e4f965713d3e7e62cbb
//https://wikimedia.org/api/rest_v1/media/math/render/svg/3a8beb14cd64d7451f9f9e4f965713d3e7e62cbb

Consider the following number triangle. \[{\displaystyle {\begin{array}{c}1\\1\quad 1\\1\quad 2\quad 1\\1\quad 3\quad 3\quad 1\\1\quad 4\quad 6\quad 4\quad 1\\1\quad 5\quad 10\quad 10\quad 5\quad 1\\1\quad 6\quad 15\quad 20\quad 15\quad 6\quad 1\\1\quad 7\quad 21\quad 35\quad 35\quad 21\quad 7\quad 1\end{array}}}\] 
// MKD latex code is from https://en.wikipedia.org/wiki/Pascal's_triangle

We refer to the top row of this triangle as "row 0," and the left side of the triangle as "column 0" (so the columns are actually drawn diagonally.)  Notice that each number that is in row 2 or lower (and not on one of the sides of the triangle) is the sum of the two numbers directly above it in the triangle. For example, in row 5, column 2 row, the number 10 is the sum of the numbers in row 4, column 1 (the number 4) and row 4, column 2 (the number 6.)

This number triangle is often called "Pascal's Triangle" after the French mathematician Blaise Pascal who link:https://cudl.lib.cam.ac.uk/view/PR-CCB-00013-00024/5[wrote] about the triangle in the mid-1600's A.D.. However, the number triangle was  link:https://aperiodical.com/2021/12/pascals-triangle-and-its-secrets-introduction/[known for centuries] before Pascal lived. You may also want to see the "History" section of this  link:https://en.wikipedia.org/wiki/Pascal%27s_triangle[wikipedia page]for additional information.


#*RECOMMENDATION:* The "Binomial" activity can replace the rest of this subsection.#


==== The Numbers in the Triangle Are The Values Of $C(n,r)$

Notice that $C(0,0),$ $C(1,0),$ and $C(1,1)$ are all equal to 1. These numbers match the values in row 0 and row 1 of the triangle. 

Now, consider an alternative way we can compute $C(n+1,r).$ Imagine we have a set containing $n+1$ elements, where one of the elements is "special" - in how many ways can we choose $r$ of the elements? There are two cases: We can choose the "special" element and then choose $r-1$ other elements from the remaining $n$ elements, or we can ignore the "special" element and choose $r$ elements from the remaining $n$ elements. 

As a specific example, suppose we want to choose 2 elements form the set of letters $\{ J, K, L, M, N\}$. We could treat $J$ as a special element. In the first case, we would always choose $J$ and then choose 1 of the 4 remaining letters; there are $C(4,1)$ ways to do this. In the second case, we never choose $J$, and must choose two other letters; there are $C(4,2)$ ways to do this. In all, there are $C(5,2)$ ways to choose 2 letters from the set, and  the sum rule from the link:./counting_arithmetic.html[Counting: Arithmetic Techniques] chapter can be applied to show that $C(5,2)$ must be equal to $C(4,1) + C(4,2).$ 

In the general case of combinations of $n+1$ elements taken $r$ at a time, we have the following theorem.

.Theorem - Pascal's identity
****
For natural numbers $n$ and $r$ such that $r \leq n,$ \[C(n+1,r) = C(n, r-1) + C(n,r)\]
****

This theorem shows that the numbers in each row of the triangle are the same numbers we can compute as $C(n,r).$ That is, since row 0 and row 1 contain the values for $C(0,0),$ $C(1,0),$ and $C(1,1),$ row 2 must contain the values for $C(2,0),$ $C(2,1),$ and $C(2,2),$ and row 3 must contain the values for $C(3,0),$ $C(3,1),$ $C(3,2),$ and $C(3,3).$ We can continue this pattern for _all_ rows of the triangle. This is an informal proof that the number triangle is made up of the values of $C(n,r)$ for all natural numbers $r$ and $n$ with $r \leq n.$  

// MKD Pascal ends 

==== $C(n,r) = C(n,n-r)$

// MKD combination NEW symmetry begins 
You may recall from an earlier example that there are $C(4,3) = 4$ possible ways to choose three letters from the set $\{ W, X, Y, Z \}$ and that there are $C(4,1) = 4$ possible ways to choose one letter from the set $\{ W, X, Y, Z \}.$  The equation $C(4,3) = C(4,1)$ does not "just happen to be true" but in fact [underline]#must be true:# Each combination of 4 elements taken 3 at a time corresponds to a combination of 4 elements taken 1 at a time, and vice versa - we can choose 3 of the 4 elements by "throwing out" the 1 element we don't want to keep. That is, we choose the 3-element subset we care about indirectly by instead choosing the 1-element we do not care about. 
// complement of the subset. 
//In fact, choosing three letters automatically leaves one letter out, or choosing one letter leaves three letters out - 
There is a one-to-one correspondence between the subsets that contain 3 letters and the subsets that contain 1 letter: \[\{ W, X, Y \} \text{ corresponds to } \{ Z \}\] \[\{ W, X, Z \} \text{ corresponds to } \{ Y \}\] \[\{ W, Y, Z \} \text{ corresponds to } \{ X \}\] \[\{ X, Y, Z \} \text{ corresponds to } \{ W \}\]

In general, there is always a one-to-one correspondence between 
the combinations of $n$ elements taken $r$ at a time and the combinations of $n$ elements taken $n-r$ at a time: Choosing $r$ elements for a subset corresponds to choosing the $n-r$ elements 
//for the complement of the subset. 
to leave out of the subset. 
This is an informal proof of the following theorem. 

.Theorem
****
For natural numbers $n$ and $r$ such that $r \leq n,$ \[C(n,r) = C(n,n-r)\]
****

Alternatively, this theorem can be proven algebraically using the formula $C(n,r) = \frac{n!}{r!(n-r)!}.$

//A formal proof of the theorem can be written by proving that, for any set $S$, the function with domain and codomain $\mathcal{P}(S)$ and that maps each subset of $S$ to its complement is both injective and surjective.
// MKD combination NEW symmetry ends

[[binomial_theorem]]
== The Binomial Theorem

An algebraic expression that is the product of a number and power of zero or more variables is called a *term.* Two terms are called *like terms* if the two terms have the exact same variables and those variables appear with the exact same exponents. For example, $a,$ $ab,$ $5a,$ and $3a^{2}$ are terms, and $a$ and $5a$ are like terms. Like terms can be added to make a new term, for example, $a + 5a$ is $6a$ where we've used the distributive property of multiplication over addition to write \[ a + 5a = 1a + 5a = (1+5)a = 6a \] 

Now consider the product of two algebraic expressions $a+b$ and $x+y$ where the variables represent real numbers. We can rewrite $(a+b)(x+y)$ in an expanded form by using the distributive property of multiplication over addition: \[ (a+b)(x+y) = a(x+y) + b(x+y) = ax + ay + bx + by. \]

Another way to view this multiplication is as follows: You need to sum all the possible products you can form by choosing a first factor from the set $\{ a, \, b \}$ and a second factor from the set $\{ x, \, y \}.$ Apply the multiplication rule to compute that there must be $(2)(2) = 4$ possible products, namely, $ax,$ $ay,$ $bx,$ and $by.$ In this way, we can calculate the same result, \[ (a+b)(x+y) = ax + ay + bx + by. \]


In case both factors are $(a+b)$, we get \[ (a+b)(a+b) = a(a+b) + b(a+b) = aa + ab + ba + bb = a^{2} + 2ab + b^{2}. \]

Notice that the coefficients can be thought of as the number of ways to choose $b$ for each term during the multiplication: \[  a^{2} + 2ab + b^{2} = C(2,0)a^{2} + C(2,1)ab + C(2,2)b^{2} = {2\choose0}a^{2} + {2\choose1}ab + {2\choose2}b^{2}. \]

//Note that this can be written as \[ \left( C(1,0)a + C(1,1)b \right)^{2} = C(2,0)a^{2} + C(2,1)ab + C(2,2)b^{2} \] or \[ \left( {1\choose0}a + {1\choose1}b \right)^{2} = {2\choose0}a^{2} + {2\choose1}ab + {2\choose2}b^{2}. \]

//This gives us \[ C(1,0)^{2} a^{2} + C(1,0)C(1,1) ab +C(1,1)C(1,0) ab + C(1,1)^{2} b^{2} = C(2,0) a^{2} + C(2,1) ab + C(2,2) b^{2} \] or \[ {1\choose0}^{2} a^{2} + {1\choose0} {1\choose1} ab +{1\choose1} {1\choose0} ab + {1\choose1}^{2 }b^{2} = {2\choose0}a^{2} + {2\choose1}ab + {2\choose2}b^{2}. \]

//Look at the next highest power: \[ (a+b)(a^{2} + 2ab + b^{2}) = a(a^{2} + 2ab + b^{2}) + b(a^{2} + 2ab + b^{2}) = a^{3} + 2a^{2} b + ab^{2} + a^{2} b + 2ab^{2} + b^{3} = (1)a^{3} + (2+1) a^{2} b + (1+2)ab^{2}) +(1)b^{3} \]

Look at the next highest powers: 


//Note that \[ (a+b)^{n} = \sum\limits_{i=0}^{n} {n\choose i} a^{n-i} b^{i} \]  


////
\begin{equation}
\begin{aligned}
(a+b)(a+b) {} & = a (a+b) + b (a+b))  \\ 
& = a^{2} + a b + b a + b^{2}  \\
& = (1)a^{2} + (1+1) a b + (1) b^{2} \\ 
& = a^{2} + 2 a b + b^{2}
\end{aligned}
\end{equation}
////



\begin{equation}
\begin{aligned}
(a+b) \left( a^{2} + 2ab + b^{2} \right) {} & = a \left( a^{2} + 2ab + b^{2} \right) + b \left( a^{2} + 2ab + b^{2} \right)  \\ 
& = a^{3} + 2a^{2} b + ab^{2} + a^{2} b + 2ab^{2} + b^{3}  \\
& = (1)a^{3} + (2+1) a^{2} b + (1+2) ab^{2} +(1) b^{3} \\ 
& = a^{3} + 3 a^{2} b + 3 ab^{2} + b^{3}
\end{aligned}
\end{equation}

\begin{equation}
\begin{aligned}
(a+b) \left( a^{3} + 3 a^{2} b + 3 ab^{2} + b^{3} \right) {} & = a \left( a^{3} + 3 a^{2} b + 3 ab^{2} + b^{3} \right) + b \left( a^{3} + 3 a^{2} b + 3 ab^{2} + b^{3} \right)  \\ 
& = a^{4} + 3 a^{3} b + 3 a^{2} b^{2} + ab^{3} + a^{3} b + 3 a^{2} b^{2} + 3 ab^{3} + b^{4}  \\
& = (1)a^{4} + (3 + 1) a^{3} b + (3 + 3) a^{2} b^{2} + (1 + 3) ab^{3} + (1)b^{4} \\ 
& = a^{4} + 4 a^{3} b + 6 a^{2} b^{2} + 4 ab^{3} + b^{4}
\end{aligned}
\end{equation}


// MKD March 18 2025
Notice that the coefficients in the algebraic expansions above are the same numbers that appear in Pascal's link:./counting_binomial#arithmetic_triangle[arithmetic triangle.]


We will prove 
//later 
in the link:./induction.html[Proofs: Mathematical Induction] chapter that \[ (a+b)^{n} = \sum\limits_{i=1}^{n} {n\choose i}  a^{n-i} b^{i} \] for every natural number $n.$

//\[ (a+b)^{n} = \sum\limits_{i=0}^{n} {n\choose i} a^{n-i}b^{i} \] 

//where the *binomial coefficient* $n\choose i$ is equal to $C$(n,i).$


////
Now assume that for natural number exponent _k_ \[ (a+b)^{k} = \sum\limits_{i=0}^{k} {k\choose i} a^{k-i} b^{i} \]  

Multiply by another factor of $(a+b)$:
\begin{equation}
\begin{aligned}
(a+b) \left( \sum\limits_{i=0}^{k} {k\choose i} a^{k-i} b^{i} \right) {} & = a \left(\sum\limits_{i=0}^{k} {k\choose i} a^{k-i} b^{i} \right) + b \left( \sum\limits_{i=0}^{k} {k\choose i} a^{k-i} b^{i} \right)  \\ 
& = \left( \sum\limits_{i=0}^{k} {k\choose i} a^{k+1-i} b^{i} \right) + \left( \sum\limits_{i=0}^{k} {k\choose i} a^{k-i} b^{i+1} \right)  \\
& = \left( {k\choose 0} a^{k+1-0} b^{0} + \sum\limits_{i=1}^{k} {k\choose i} a^{k-i} b^{i} \right) + \left( \sum\limits_{i=0}^{k-1} {k\choose i} a^{k-i} b^{i+1} + {k\choose k} a^{k-k} b^{k+1} \right)  \\
& = {k\choose 0} a^{k+1-0} b^{0} + \left( \sum\limits_{i=1}^{k} {k\choose i} a^{k-i} b^{i} \right) + \left( \sum\limits_{i=0}^{k-1} {k\choose i} a^{k-i} b^{i+1} \right) + {k\choose k} a^{k-k} b^{k+1} \\
\end{aligned}
\end{equation}
////

== Exercises

. List all the permutations of $\{1, 2, 3\}$.

. How many permutations are there of the set $\{1, a, 2, b, 3, c, 5\}$?

. Let $A=\{a, b, c, d\}$
	.. List all the 3-permutations of $A$.
	.. List all the 3-combinations of $A$.
. Let $A=\{a, b, c, d, e\}$
	.. List all the 2-permutations of $A$.
	.. List all the 2-combinations of $A$.

. Find the value of the following
	.. $P(5,2)$
	.. $P(10,8)$
	.. $P(14,10)$
	.. $P(12,8)$
	.. $C(5,2)$
	.. $C(10,8)$
	.. $C(14,10)$
	.. $C(12,8)$

. How many bit strings of length 10 contain:
	.. Exactly five 1s?
	.. At most five 1s?
	.. At least four 1s?
	.. The same number of 0s and 1s?

. How many permutations of the digits $12345678$ contain:
	.. The string 284?
	.. The string 3581?
	.. The string 21 and 57?



. How many ways are there to choose 9 cards from a standard 52 card deck?

. How many ways can you be dealt a pair in a 5 card hand (2 cards of the same rank and 3 cards of a different rank)?

. How many ways can you be dealt a full house in a 5 card hand (2 cards of the same rank and 3 cards of the same rank)?

. How many license plates consist of 4 letters followed by 3 digits if:
	.. Repetition is allowed?
	.. Repetition is not allowed?

. Using $C(n,r) = \displaystyle  \frac{n!}{r!(n-r)!}$, evaluate the terms of this triangular table. Will you need the formula to extend the table to more rows?

\begin{array}{ccccccccccccc}
&&&&&&&C(0,0)&&&&&&\\
&&&&&& C(1,0) && C(1,1) &&&&&\\
&&&&& C(2,0) && C(2,1) && C(2,2) &&&&\\
&&&& C(3,0) && C(3,1) && C(3,2) && C(3,3) &&&\\
&&& C(4,0) && C(4,1) && C(4,2) && C(4,3) && C(4,4) &&\\
\end{array}
